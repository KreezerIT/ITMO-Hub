# *Лабораторная работа №1*

> `WHERE` `ORDER BY` `DISTINCT` `LIKE` `aggregate func`

Чтобы получить данные из таблицы, нужно выполнить ***запрос***. Для
этого предназначен SQL-оператор `SELECT`. Он 
состоит из нескольких частей: выборки (в которой перечисляются столбцы,
которые должны быть получены), списка таблиц (в нём перечисляются
таблицы, из которых будут получены данные) и необязательного условия
(определяющего ограничения). Например, чтобы получить все строки
таблицы product, введите:

```SQL
SELECT * FROM production.product;
```


Здесь * — это краткое обозначение «всех столбцов». Также мы можем
явно указать столбцы, которые хотим получить:

```SQL
SELECT product_id, name FROM production.product;
```

В списке выборки вы можете писать не только ссылки на столбцы, но и
выражения. Например, вы можете написать:

```SQL
SELECT product_id, name, list_price - standard_cost AS discountsize
FROM production.product;
```


Обратите внимание, как предложение AS позволяет переименовать выходной
столбец. (Само слово AS можно опускать.)

Запрос можно дополнить «условием», добавив предложение WHERE,
ограничивающее множество возвращаемых строк. В
предложении WHERE указывается логическое выражение (проверка
истинности), которое служит фильтром строк: в результате оказываются
только те строки, для которых это выражение истинно. В этом выражении
могут присутствовать обычные логические операторы (AND, OR и NOT).

```SQL
SELECT name, list_price, color
FROM production.product
WHERE list_price = 3578.27 AND (size = '62' OR color = 'Red');
```

Оператор IN определяет принадлежность значения одному и значений в
списке

```SQL
SELECT name, color FROM production.product
WHERE color IN ('Red','Black','Silver');
```

Вы можете получить результаты запроса в определённом порядке:

```SQL
SELECT first_name, middle_name, last_name
FROM person.person
ORDER BY firstname ASC, middlename DESC, lastname ASC;
```

Также вы можете ограничить количество выводимых строк:

```SQL
SELECT name, list_price
FROM production.product
ORDER BY list_price DESC
LIMIT 5;
```

Если требуется, вы можете убрать дублирующиеся строки из результата
запроса:

```SQL
SELECT DISTINCT color, size
FROM production.product;
```

При работе со строковыми значениями возникает необходимость проверки на
соответствие значения не строке, а шаблону, например, требуется найти
все продукты, начинающиеся на букву 'D'. Для этого используется оператор
LIKE:

```SQL
SELECT name FROM production.product
WHERE name LIKE 'D%';
```

Тема регулярок достаточно обширна, поэтому советую ознакомиться с ней в
официальной [документации](https://www.postgresql.org/docs/current/functions-matching.html)

В реляционных базах данных существует особое значение -- NULL. Он
сообщает пользователям, что в данный момент времени значение атрибута не
определено. Для работы с этим значением нельзя использовать оператор
сравнения на равенство или любой другой оператор сравнения. Проверка на
определенность осуществляется с помощью оператора IS.

```SQL
SELECT name FROM production.product
WHERE color IS NULL;
```

Данный запрос возвращает название товаров, для которых цвет не
определен.


```SQL
SELECT name FROM production.product
WHERE color IS NOT NULL;
```

Этот запрос возвращает название товаров, у которых определен размер,
т.е. он не является NULL.

Для того чтобы посчитать количество записей в таблице воспользуемся
агрегатной функцией. Агрегатные функции вычисляют одно значение над
некоторым набором строк. Для того чтобы посчитать сколько у нас записей
в таблице продукт:


```SQL
SELECT count(*) FROM production.product;
```

Или максимальная цена продукта красного цвета:


```SQL
SELECT max(listprice) FROM production.product
WHERE color = 'Red';
```

[Список функций](https://www.postgresql.org/docs/current/functions-aggregate.html)


Так же можно использовать функции в условии для работы с различными
типами данных:

```SQL
SELECT name
FROM production.product
WHERE len(name) = 5
```

[Список функций для работы со строками](https://www.postgresql.org/docs/current/functions-string.html)
