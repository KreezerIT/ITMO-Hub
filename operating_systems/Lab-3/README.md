# Лабораторная работа №3. *Управление процессами в ОС Linux*

[Файл с полным ТЗ+Теория](OS_LabDescription_3.pdf)

## Задание на лабораторную работу

Создайте скрипты или запишите последовательности выполнения команд для перечисленных заданий и предъявите их преподавателю.

1. Создайте и однократно выполните скрипт (в этом скрипте нельзя использовать условный оператор и операторы проверки свойств и значений), который будет пытаться создать директорию `test` в домашней директории.  
   Если создание директории пройдет успешно, скрипт выведет в файл `~/report` сообщение вида `"catalog test was created successfully"` и создаст в директории `test` файл с именем `Дата_Время_Запуска_Скрипта`.  
   Затем, независимо от результатов предыдущего шага, скрипт должен опросить с помощью команды `ping` хост www.net_nikogo.ru и, если этот хост недоступен, дописать сообщение об ошибке в файл `~/report`.  
   Сообщение об ошибке должно начинаться с текущей даты и времени, а затем содержать через пробел произвольный текст сообщения об ошибке.

2. Задайте еще один однократный запуск скрипта из пункта 1 через 2 минуты. Консоль после этого должна оставаться свободной.  
   Выполнив отдельную команду, организуйте слежение за файлом `~/report` и выведите на консоль новые строки из этого файла, как только они появятся.

3. Задайте запуск скрипта из пункта 1 в каждую пятую минуту каждого часа в день недели, в который вы будете выполнять работу.

4. Создайте три фоновых процесса, выполняющих одинаковый бесконечный цикл вычисления (например, перемножение двух чисел).  
   После запуска процессов должна сохраниться возможность использовать виртуальную консоль, с которой их запустили.  
   Используя команду `top`, проанализируйте процент использования ресурсов процессора этими процессами.  
   Создайте скрипт, который будет в автоматическом режиме обеспечивать, чтобы тот процесс, который был запущен первым, использовал ресурс процессора **не более чем на 10%**.  
   Послав сигнал, завершите работу процесса, запущенного третьим.  
   Проверьте, что созданный скрипт по-прежнему удерживает потребление ресурсов процессора первым процессом в заданном диапазоне.

5. Создайте пару скриптов: **генератор** и **обработчик**.  
   Процесс «Генератор» передает информацию процессу «Обработчик» с помощью именованного канала.  
   Процесс «Обработчик» должен осуществлять следующую обработку переданных строк:

    - если строка содержит единственный символ `+`, обработчик переключает режим на «сложение» и ждет ввода численных данных;
    - если строка содержит единственный символ `*`, обработчик переключает режим на «умножение» и ждет ввода численных данных;
    - если строка содержит целое число, обработчик выполняет текущую активную операцию (режим), используя считанное число и текущую вычисляемую переменную;
    - при запуске скрипта режим устанавливается в «сложение», а вычисляемая переменная приравнивается к `1`;
    - при получении строки `QUIT` скрипт «Обработчик» выдает сообщение о плановой остановке и оба скрипта завершают работу;
    - при получении любых других значений строки оба скрипта завершают работу с сообщением об ошибке входных данных.

6. Создайте пару скриптов: **генератор** и **обработчик**.  
   Процесс «Генератор» считывает с консоли строки в бесконечном цикле:

    - если строка содержит `+`, он посылает процессу «Обработчик» сигнал `USR1`;
    - если строка содержит `*`, он посылает сигнал `USR2`;
    - если строка содержит слово `TERM`, он посылает сигнал `SIGTERM` и завершает свою работу;
    - другие значения строк игнорируются.

   Процесс «Обработчик»:

    - хранит текущее значение числа (начальное значение `1`);
    - каждую секунду выводит результат вычисления;
    - при получении `USR1` увеличивает число на 2;
    - при получении `USR2` умножает число на 2;
    - при получении `SIGTERM` завершает работу, выведя сообщение о завершении по сигналу от другого процесса.
